import java.io.IOException;
import monopoly.*;

public class Partie {
    private static final Integer nbCartes = 16;
    private static final Integer nbCases = 40;
    private static final Integer nbjoueurs = 3;

    public static void main(String[] args) {
        Carte[] cartesChances = initCartes("/res/CartesChance.txt");
        Carte[] cartesCdC = initCartes("/res/CartesCdC.txt");
        // Case[] cases = initCases("/res/Cases.txt");

    }


    private static Carte[] initCartes(String fichier) {
        Carte[] cartes = new Carte[nbCartes];
        try {
            String[] donnees = Fichier.Lecture(fichier, nbCartes);
            for(int i = 0; i < nbCartes; i++) {
                String[] donneeCarte = donnees[i].split("@");
                cartes[i] = new Carte(Integer.parseInt(donneeCarte[0]), TypeCarte.fromString(donneeCarte[1]), Integer.parseInt(donneeCarte[2]), donneeCarte[3]);
            }
        }
        catch(IOException e) {
            System.out.println("Partie.java IOException. " + e.getMessage());
        }
        catch(NumberFormatException e) {
            System.out.println("Partie.java FORMAT. " + e.getMessage());
        }
        return cartes;
    }

    private static Case[] initCases(String fichier) {
        Case[] cases = new Case[nbCases];
        Integer nbLoyers = 6;
        try {
            String[] donnees = Fichier.Lecture(fichier, nbCases);
            for(int i = 0; i < nbCases; i++) {
                String[] donneeCase = donnees[i].split("@");
                System.out.println(donneeCase[0]);
                String[] loyerstr = donneeCase[5].split(",");
                Integer[] loyer = new Integer[nbLoyers];
                for (int j = 0; j < nbLoyers; j++) {
                    loyer[j] = Integer.parseInt(loyerstr[j]);
                }
                cases[i] = new Case(Integer.parseInt(donneeCase[0]), TypeCase.fromString(donneeCase[1]),
                donneeCase[2], Integer.parseInt(donneeCase[3]), nbjoueurs, Integer.parseInt(donneeCase[4]),
                loyer);
            }
        }
        catch(IOException e) {
            System.out.println("Partie.java IOException. " + e.getMessage());
        }
        catch(NumberFormatException e) {
            System.out.println("Partie.java FORMAT. " + e.getMessage());
        }
        return cases;
    }




}